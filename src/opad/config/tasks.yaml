find_news_articles:
  description: >
    Search for 2-3 recent news articles about {topic} in {language}.
    The articles should be approximately {length} words in length and cover current, relevant news on the specified topic.
    Return the full text of 2-3 most suitable news articles you find, ensuring each article includes complete source information.
    Return the result as valid JSON format with proper string quotes for all keys and values.
  expected_output: >
    Return a valid JSON object with this exact structure:
    {
      "articles": [
        {
          "title": "Article title",
          "source_name": "Publication name",
          "source_url": "URL or null",
          "publication_date": "Date or null",
          "author": "Author name or null",
          "content": "Full article text"
        }
      ]
    }
    All keys must be in double quotes. All string values must be in double quotes. Use null for optional fields that are not available.
  agent: paragraph_finder
  output_file: output/found_articles.json

pick_best_article:
  description: >
    Evaluate the 2-3 news articles found by the paragraph finder and select the single best article that:
    - Most closely matches the {topic} requirement
    - Is most appropriate for {level} level learners in {language}
    - Has a length closest to {length} words
    - Provides the best educational value for language learning
    - Is the most recent article
    
    Before selecting, check the source URL to confirm the article exists there.
    If an author name is provided, verify it matches the actual author on the source page. If the author doesn't match or cannot be found on the page, do not include an author name or select a different article.
    Only select articles that can be verified through the source URL.
    If an article cannot be verified, select a different one.
    Return the result as valid JSON format with proper string quotes for all keys and values.
  expected_output: >
    Return a valid JSON object with this exact structure:
    {
      "article": {
        "title": "Article title",
        "source_name": "Publication name",
        "source_url": "URL or null",
        "publication_date": "Date or null",
        "author": "Author name or null",
        "content": "Full article text"
      },
      "selection_rationale": "Explanation of why this article was selected"
    }
    All keys must be in double quotes. All string values must be in double quotes. Use null for optional fields that are not available.
    Only include author if you can verify it exists on the source page.
  agent: article_picker
  context:
    - find_news_articles
  output_file: output/selected_article.json

adapt_news_article:
  description: >
    Take the news article selected by the article picker and rewrite it to match the {level} difficulty level in {language}.
    Adjust the vocabulary to use words appropriate for {level} level learners.
    Simplify sentence structures while maintaining the original meaning and key information.
    Ensure the final text is approximately {length} words.
    Make the content engaging and educational, suitable for language learning reading materials.
    Preserve the main facts, context, and important details from the original article.
    
    At the beginning of the output, before the article content, include a source section with:
    - Source name (publication/news outlet name)
    - Source URL as a clickable markdown link
    - Publication date
    - Author name (only if it was verified in the previous step)
    
    Structure the output with clear markdown sections and headings for better readability.
  expected_output: >
    A rewritten version of the selected news article adapted for {level} level learners in {language}.
    The text should be approximately {length} words, use appropriate vocabulary for the level, and maintain all key information from the original article.
    The content should be clear, engaging, and suitable as educational reading material.
    The output must start with a source section containing: source name, source URL (as markdown link), publication date, and author (if available).
  agent: paragraph_writer
  context:
    - pick_best_article
  output_file: output/adapted_reading_material.md

add_vocabulary:
  description: >
    Extract vocabulary words from the adapted reading material that are appropriate for {level} level learners in {language}.
    
    Only include words at or above the {level} level. Exclude all words below {level}.
    Exclude proper nouns and words that {level} learners already know.
    Only include words that genuinely challenge {level} level learners.
    
    For each word, provide a concise definition in {language} (one sentence) and one example sentence.
    
    Replace each vocabulary word in the article text with [word:definition] format for clickable linking.
    Organize the vocabulary section with clear markdown headings and structure for easy navigation.
    
    Work efficiently: Extract words, create definitions, and replace them in the text in one pass.
  expected_output: >
    Adapted reading material with vocabulary words replaced with [word:definition] format.
    Vocabulary section appended with {level}-appropriate words that match the difficulty level, each with definition and example.
    No words below the target level should be included.
  agent: paragraph_writer
  context:
    - adapt_news_article
  output_file: output/adapted_reading_material.md

