# Dockerfile for Web service (Next.js)
FROM node:20-slim

# Install Node.js dependencies and build Next.js
WORKDIR /app
COPY . /app
WORKDIR /app/src/web

# Install dependencies
RUN npm install

# Build Next.js
RUN npm run build

# Expose port (Railway will set PORT env var)
EXPOSE 3000

# Start Next.js server on Railway's PORT (default 3000)
CMD sh -c "npx next start -p ${PORT:-3000}"
